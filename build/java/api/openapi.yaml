openapi: 3.0.3
info:
  description: OpenDataDiscovery API Contract
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: OpenDataDiscovery API Contract
  version: 0.0.1
servers:
- url: /
paths:
  /ingestion/{datasourceOddrn}/datasets:
    post:
      description: Provides list of available datasets
      operationId: getDataSetList
      parameters:
      - explode: false
        in: path
        name: datasourceOddrn
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataSetList'
      responses:
        "200":
          description: OK
      tags:
      - OpenDataDiscovery
      x-contentType: application/json
      x-accepts: application/json
  /ingestion/{datasourceOddrn}/transformers:
    post:
      description: Provides list of available transformers
      operationId: getDataTransformerList
      parameters:
      - explode: false
        in: path
        name: datasourceOddrn
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataTransformerList'
      responses:
        "200":
          description: OK
      tags:
      - OpenDataDiscovery
      x-contentType: application/json
      x-accepts: application/json
  /ingestion/{datasourceOddrn}/transformers/runs:
    post:
      description: Provides list of runs for all transformers
      operationId: getDataTransformerRunList
      parameters:
      - explode: false
        in: path
        name: datasourceOddrn
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataTransformerRunList'
      responses:
        "200":
          description: OK
      tags:
      - OpenDataDiscovery
      x-contentType: application/json
      x-accepts: application/json
  /ingestion/{datasourceOddrn}/consumers:
    post:
      description: Provides list of available consumers
      operationId: getDataConsumerList
      parameters:
      - explode: false
        in: path
        name: datasourceOddrn
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataConsumerList'
      responses:
        "200":
          description: OK
      tags:
      - OpenDataDiscovery
      x-contentType: application/json
      x-accepts: application/json
  /ingestion/{datasourceOddrn}/inputs:
    post:
      description: Provides list of available inputs
      operationId: getDataInputList
      parameters:
      - explode: false
        in: path
        name: datasourceOddrn
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataInputList'
      responses:
        "200":
          description: OK
      tags:
      - OpenDataDiscovery
      x-contentType: application/json
      x-accepts: application/json
  /ingestion/{datasourceOddrn}/qualitytests:
    post:
      description: Provides list of available data quality tests
      operationId: getDataQualityTestList
      parameters:
      - explode: false
        in: path
        name: datasourceOddrn
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataQualityTestList'
      responses:
        "200":
          description: OK
      tags:
      - OpenDataDiscovery
      x-contentType: application/json
      x-accepts: application/json
  /ingestion/{datasourceOddrn}/qualitytests/runs:
    post:
      description: Provides list of available data quality tests runs
      operationId: getDataQualityTestRunList
      parameters:
      - explode: false
        in: path
        name: datasourceOddrn
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DataQualityTestRunList'
      responses:
        "200":
          description: OK
      tags:
      - OpenDataDiscovery
      x-contentType: application/json
      x-accepts: application/json
components:
  schemas:
    DataSetList:
      items:
        $ref: '#/components/schemas/DataSet'
      type: array
    DataSet:
      allOf:
      - $ref: '#/components/schemas/BaseObject'
      - $ref: '#/components/schemas/DataSet_allOf'
    BaseObject:
      properties:
        oddrn:
          example: //aws/glue/{account_id}/{database}/{tablename}
          type: string
        name:
          type: string
        owner:
          example: //aws/iam/{account_id}/user/name
          type: string
        metadata:
          additionalProperties:
            type: string
          type: object
      required:
      - name
      - oddrn
      - owner
      type: object
    DataSetField:
      allOf:
      - $ref: '#/components/schemas/BaseObject'
      - $ref: '#/components/schemas/DataSetField_allOf'
    DataSetFieldType:
      properties:
        schema:
          $ref: '#/components/schemas/DataSetFieldSchema'
        stats:
          $ref: '#/components/schemas/DataSetFieldStat'
      required:
      - schema
      type: object
    DataSetFieldSchema:
      properties:
        type:
          enum:
          - TYPE_STRING
          - TYPE_NUMBER
          - TYPE_INTEGER
          - TYPE_BOOLEAN
          - TYPE_DATETIME
          - TYPE_STRUCT
          - TYPE_BINARY
          - TYPE_LIST
          - TYPE_MAP
          type: string
        logicalType:
          type: string
        isNullable:
          type: boolean
        key:
          $ref: '#/components/schemas/DataSetFieldType'
        value:
          $ref: '#/components/schemas/DataSetFieldType'
        fieldList:
          items:
            $ref: '#/components/schemas/DataSetField'
          type: array
      required:
      - isNullable
      - type
      type: object
    DataSetFieldStat:
      properties:
        name:
          type: string
        complexStats:
          $ref: '#/components/schemas/ComplexFieldStat'
        booleanStats:
          $ref: '#/components/schemas/BooleanFieldStat'
        integerStats:
          $ref: '#/components/schemas/IntegerFieldStat'
        numberStats:
          $ref: '#/components/schemas/NumberFieldStat'
        stringStats:
          $ref: '#/components/schemas/StringFieldStat'
        binaryStats:
          $ref: '#/components/schemas/BinaryFieldStat'
        dateTimeStats:
          $ref: '#/components/schemas/DateTimeFieldStat'
      required:
      - name
      type: object
    ComplexFieldStat:
      properties:
        nullsCount:
          format: int64
          type: integer
        uniqueCount:
          format: int64
          type: integer
      required:
      - nullsCount
      - uniqueCount
      type: object
    BooleanFieldStat:
      properties:
        trueCount:
          format: int64
          type: integer
        falseCount:
          format: int64
          type: integer
        nullsCount:
          format: int64
          type: integer
      required:
      - falseCount
      - nullsCount
      - trueCount
      type: object
    IntegerFieldStat:
      properties:
        lowValue:
          format: int64
          type: integer
        highValue:
          format: int64
          type: integer
        meanValue:
          format: int64
          type: integer
        medianValue:
          format: int64
          type: integer
        nullsCount:
          format: int64
          type: integer
        uniqueCount:
          format: int64
          type: integer
      required:
      - highValue
      - lowValue
      - nullsCount
      - uniqueCount
      type: object
    NumberFieldStat:
      properties:
        lowValue:
          type: number
        highValue:
          type: number
        meanValue:
          type: number
        medianValue:
          type: number
        nullsCount:
          format: int64
          type: integer
        uniqueCount:
          format: int64
          type: integer
      required:
      - highValue
      - lowValue
      - nullsCount
      - uniqueCount
      type: object
    StringFieldStat:
      properties:
        maxLength:
          type: integer
        avgLength:
          type: number
        nullsCount:
          format: int64
          type: integer
        uniqueCount:
          format: int64
          type: integer
      required:
      - avgLength
      - maxLength
      - nullsCount
      - uniqueCount
      type: object
    BinaryFieldStat:
      properties:
        maxLength:
          type: integer
        avgLength:
          type: number
        nullsCount:
          format: int64
          type: integer
        uniqueCount:
          format: int64
          type: integer
      required:
      - avgLength
      - maxLength
      - nullsCount
      - uniqueCount
      type: object
    DateTimeFieldStat:
      properties:
        lowValue:
          format: date-time
          type: string
        highValue:
          format: date-time
          type: string
        meanValue:
          format: date-time
          type: string
        medianValue:
          format: date-time
          type: string
        nullsCount:
          format: int64
          type: integer
        uniqueCount:
          format: int64
          type: integer
      required:
      - highValue
      - lowValue
      - nullsCount
      - uniqueCount
      type: object
    DataTransformerList:
      items:
        $ref: '#/components/schemas/DataTransformer'
      type: array
    DataTransformer:
      allOf:
      - $ref: '#/components/schemas/BaseObject'
      - $ref: '#/components/schemas/DataTransformer_allOf'
    DataTransformerRunList:
      items:
        $ref: '#/components/schemas/DataTransformerRun'
      type: array
    DataTransformerRun:
      allOf:
      - $ref: '#/components/schemas/BaseObject'
      - $ref: '#/components/schemas/DataTransformerRun_allOf'
    DataConsumerList:
      items:
        $ref: '#/components/schemas/DataConsumer'
      type: array
    DataConsumer:
      allOf:
      - $ref: '#/components/schemas/BaseObject'
      - $ref: '#/components/schemas/DataConsumer_allOf'
    DataInputList:
      items:
        $ref: '#/components/schemas/DataInput'
      type: array
    DataInput:
      allOf:
      - $ref: '#/components/schemas/BaseObject'
      - $ref: '#/components/schemas/DataInput_allOf'
    DataQualityTestList:
      items:
        $ref: '#/components/schemas/DataQualityTest'
      type: array
    DataQualityTest:
      allOf:
      - $ref: '#/components/schemas/BaseObject'
      - $ref: '#/components/schemas/DataQualityTest_allOf'
    LinkedUrl:
      properties:
        name:
          type: string
        url:
          type: string
      required:
      - name
      - url
      type: object
    DataQualityTestRunList:
      items:
        $ref: '#/components/schemas/DataQualityTestRun'
      type: array
    DataQualityTestRun:
      allOf:
      - $ref: '#/components/schemas/BaseObject'
      - $ref: '#/components/schemas/DataQualityTestRun_allOf'
    DataSet_allOf:
      properties:
        parentOddrn:
          type: string
        description:
          type: string
        updatedAt:
          format: date-time
          type: string
        subtype:
          enum:
          - DATASET_TABLE
          - DATASET_FILE
          - DATASET_FEATURE_GROUP
          type: string
        fieldList:
          items:
            $ref: '#/components/schemas/DataSetField'
          type: array
        dataSetList:
          items:
            $ref: '#/components/schemas/DataSet'
          type: array
      required:
      - description
      type: object
    DataSetField_allOf:
      properties:
        name:
          type: string
        type:
          $ref: '#/components/schemas/DataSetFieldType'
        defaultValue:
          type: string
        description:
          type: string
      required:
      - name
      - type
      type: object
    DataTransformer_allOf:
      properties:
        description:
          type: string
        sourceCodeUrl:
          type: string
        sql:
          type: string
        inputs:
          items:
            type: string
          type: array
        outputs:
          items:
            type: string
          type: array
        subtype:
          enum:
          - DATATRANSFORMER_JOB
          - DATATRANSFORMER_EXPERIMENT
          - DATATRANSFORMER_ML_MODEL_TRAINING
          type: string
      required:
      - description
      - inputs
      - outputs
      - subtype
      type: object
    DataTransformerRun_allOf:
      properties:
        transformerOddrn:
          type: string
        startTime:
          format: date-time
          type: string
        endTime:
          format: date-time
          type: string
        statusReason:
          type: string
        status:
          enum:
          - SUCCESS
          - FAIL
          - ABORTED
          - OTHER
          type: string
      type: object
    DataConsumer_allOf:
      properties:
        description:
          type: string
        inputs:
          items:
            type: string
          type: array
        subtype:
          enum:
          - DATACONSUMER_DASHBOARD
          - DATACONSUMER_ML_MODEL
          type: string
      required:
      - description
      type: object
    DataInput_allOf:
      properties:
        description:
          type: string
      required:
      - description
      type: object
    DataQualityTest_allOf:
      properties:
        description:
          type: string
        datasetList:
          items:
            type: string
          type: array
        suiteUrl:
          type: string
        linkedUrls:
          $ref: '#/components/schemas/LinkedUrl'
      required:
      - description
      type: object
    DataQualityTestRun_allOf:
      properties:
        dataQualityTestOddrn:
          type: string
        startTime:
          format: date-time
          type: string
        endTime:
          format: date-time
          type: string
        statusReason:
          type: string
        status:
          enum:
          - SUCCESS
          - FAIL
          - ABORTED
          - OTHER
          type: string
      type: object

